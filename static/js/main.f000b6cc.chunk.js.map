{"version":3,"sources":["components/SearchField.js","actions.js","actionTypes.js","components/HideNoDoc.js","components/ResultCount.js","components/TableHeaderCell.js","components/TableHeaderRow.js","components/LinkCell.js","components/NumberCell.js","components/TableRow.js","components/Table.js","components/Main.js","reducers/index.js","App.js","index.js"],"names":["_","require","qs","SearchField","props","updateInput","input","setState","setFilterKey","pushHistory","location","state","stringify","q","history","push","updateTitle","document","title","params","parse","search","debounce","className","type","placeholder","value","this","onChange","e","target","React","Component","withRouter","connect","filterKey","payload","hideNoDoc","setHideNoDoc","id","checked","htmlFor","filteredEntries","length","TableHeaderCell","classnames","sortKey","sortKeyInState","isNumber","sortOrders","style","width","onClick","setSortKey","label","TableHeaderRow","LinkCell","entry","href","path","total","rel","class_name","NumberCell","number","TableRow","class_desc","method_count","method_desc","map","key","Main","sortPriorities","initialState","entries","slice","filterEntries","sortPriority","filter","toLowerCase","indexOf","sort","a","b","i","x","y","order","store","createStore","newState","action","ReactDOM","render","component","exact","getElementById"],"mappings":"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","file":"static/js/main.f000b6cc.chunk.js","sourcesContent":["import React from 'react';\nimport { connect } from 'react-redux';\nimport { withRouter } from 'react-router';\nimport { setFilterKey } from '../actions';\nconst _ = require('lodash');\nconst qs = require('query-string');\n\nclass SearchField extends React.Component {\n  constructor(props) {\n    super(props);\n\n    const params = qs.parse(props.location.search);\n\n    this.state = { input: params.q || '' };\n\n    this.props.setFilterKey(this.state.input);\n\n    this.setFilterKey = _.debounce(() => {\n      this.props.setFilterKey(this.state.input);\n      this.pushHistory();\n      this.updateTitle();\n    }, 500);\n  }\n\n  updateInput = input => {\n    this.setState({ input });\n    this.setFilterKey();\n  };\n\n  pushHistory = () => {\n    const location = this.state.input ? `/search?${qs.stringify({ q: this.state.input })}` : '/';\n    this.props.history.push(location);\n  };\n\n  updateTitle = () => {\n    document.title = this.state.input || 'rails-class-table-v2';\n  }\n\n  render() {\n    return (\n      <div className=\"form-group\">\n        <input type=\"search\" className=\"form-control\" placeholder=\"クラス名でフィルタ...\" value={this.state.input} onChange={e => this.updateInput(e.target.value)} />\n      </div>\n    );\n  }\n}\n\nexport default withRouter(connect(\n  null,\n  { setFilterKey }\n)(SearchField));\n","import { SET_FILTER_KEY, SET_SORT_KEY, SET_HIDE_NO_DOC } from './actionTypes';\n\nexport const setFilterKey = filterKey => ({\n  type: SET_FILTER_KEY,\n  payload: {\n    filterKey\n  }\n});\n\nexport const setSortKey = sortKey => ({\n  type: SET_SORT_KEY,\n  payload: {\n    sortKey\n  }\n});\n\nexport const setHideNoDoc = hideNoDoc => ({\n  type: SET_HIDE_NO_DOC,\n  payload: {\n    hideNoDoc\n  }\n});\n","export const SET_FILTER_KEY = 'SET_FILTER_KEY';\nexport const SET_SORT_KEY = 'SET_SORT_KEY';\nexport const SET_HIDE_NO_DOC = 'SET_HIDE_NO_DOC';\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { setHideNoDoc } from '../actions';\n\nconst HideNoDoc = ({ hideNoDoc, setHideNoDoc }) => {\n  return (\n    <div className=\"form-check form-group\">\n      <input type=\"checkbox\" id=\"hideNoDoc\" className=\"form-check-input\" checked={hideNoDoc} onChange={e => setHideNoDoc(e.target.checked)} />\n      <label className=\"form-check-label\" htmlFor=\"hideNoDoc\">ドキュメントが書かれていないクラスを隠す</label>\n    </div>\n  );\n};\n\nconst mapStateToProps = state => {\n  return { hideNoDoc: state.hideNoDoc };\n};\n\nexport default connect(\n  mapStateToProps,\n  { setHideNoDoc }\n)(HideNoDoc);\n","import React from 'react';\nimport { connect } from 'react-redux';\n\nconst ResultCount = ({ filteredEntries }) => {\n  return (\n    <p>{filteredEntries.length}件の結果</p>\n  );\n};\n\nconst mapStateToProps = state => {\n  return { filteredEntries: state.filteredEntries };\n};\n\nexport default connect(mapStateToProps)(ResultCount);\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport classnames from 'classnames';\nimport { setSortKey } from '../actions';\n\nclass TableHeaderCell extends React.Component {\n  render() {\n    const className = classnames({\n      'table-info': this.props.sortKey === this.props.sortKeyInState,\n      'text-right': this.props.isNumber\n    }, this.props.sortOrders[this.props.sortKey] > 0 ? 'dropup' : 'dropdown');\n    return (\n      <th className={className}\n        style={this.props.width ? {'width': this.props.width} : {}}\n        onClick={() => this.props.setSortKey(this.props.sortKey)}\n      >\n        {this.props.label}\n        {\" \"}\n        <span className=\"dropdown-toggle\"></span>\n      </th>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    sortKeyInState: state.sortKey,\n    sortOrders: state.sortOrders\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  { setSortKey }\n)(TableHeaderCell);\n","import React from 'react';\nimport TableHeaderCell from './TableHeaderCell';\n\nexport default function TableHeaderRow() {\n  return (\n    <tr>\n      <TableHeaderCell label=\"クラス名\" sortKey=\"class_name\" isNumber={false} />\n      <TableHeaderCell label=\"クラス概要\" sortKey=\"class_desc\" isNumber={true} width=\"8em\" />\n      <TableHeaderCell label=\"メソッド数\" sortKey=\"method_count\" isNumber={true} width=\"8em\" />\n      <TableHeaderCell label=\"メソッド概要\" sortKey=\"method_desc\" isNumber={true} width=\"9em\" />\n      <TableHeaderCell label=\"合計\" sortKey=\"total\" isNumber={true} width=\"5em\" />\n    </tr>\n  );\n};\n","import React from 'react';\nimport classnames from 'classnames';\n\nexport default function LinkCell({ entry }) {\n  return (\n    <td>\n      <a href={`https://api.rubyonrails.org/${entry.path}`}\n        className={classnames({'text-secondary': entry.total === 0})}\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n      >{entry.class_name}</a>\n    </td>\n  );\n};\n","import React from 'react';\n\nexport default function NumberCell({ number }) {\n  return <td className=\"text-right\">{number}</td>;\n};\n","import React from 'react';\nimport LinkCell from './LinkCell';\nimport NumberCell from './NumberCell';\n\nexport default function TableRow({ entry }) {\n  return (\n    <tr>\n      <LinkCell entry={entry} />\n      <NumberCell number={entry.class_desc} />\n      <NumberCell number={entry.method_count} />\n      <NumberCell number={entry.method_desc} />\n      <NumberCell number={entry.total} />\n    </tr>\n  );\n};\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport TableHeaderRow from './TableHeaderRow';\nimport TableRow from './TableRow';\n\nconst Table = ({ filteredEntries }) => {\n  return (\n    <table className=\"table table-hover\">\n      <thead>\n        <TableHeaderRow />\n      </thead>\n      <tbody>\n        {filteredEntries.map(entry => <TableRow entry={entry} key={entry.class_name} />)}\n      </tbody>\n    </table>\n  );\n};\n\nconst mapStateToProps = state => {\n  return { filteredEntries: state.filteredEntries };\n};\n\nexport default connect(\n  mapStateToProps\n)(Table);\n","import React from 'react';\nimport SearchField from './SearchField';\nimport HideNoDoc from './HideNoDoc';\nimport ResultCount from './ResultCount';\nimport Table from './Table';\n\nexport default function Main() {\n  return (\n    <div className=\"main container-fluid my-3\">\n      <SearchField />\n      <HideNoDoc />\n      <ResultCount />\n      <Table />\n    </div>\n  );\n};\n","import { SET_FILTER_KEY, SET_SORT_KEY, SET_HIDE_NO_DOC } from '../actionTypes';\nimport entries from '../data/entries.json';\n\nconst sortPriorities = {\n  class_name: ['class_name'],\n  class_desc: ['class_desc', 'method_desc', 'method_count', 'class_name'],\n  method_count: ['method_count', 'method_desc', 'class_desc', 'class_name'],\n  method_desc: ['method_desc', 'class_desc', 'method_count', 'class_name'],\n  total: ['total', 'method_desc', 'class_desc', 'method_count', 'class_name']\n};\n\nconst initialState = {\n  filterKey: '',\n  filteredEntries: entries.slice(),\n  sortKey: 'class_desc',\n  sortOrders: {\n    class_name: 1,\n    class_desc: -1,\n    method_count: -1,\n    method_desc: -1,\n    total: -1\n  },\n  hideNoDoc: true\n};\n\nconst filterEntries = state => {\n  const sortPriority = sortPriorities[state.sortKey];\n  return entries.filter(entry => {\n    return entry.class_name.toLowerCase().indexOf(state.filterKey.toLowerCase()) !== -1;\n  }).filter(entry => {\n    if (state.hideNoDoc) {\n      return entry.total !== 0;\n    } else {\n      return true;\n    }\n  }).sort((a, b) => {\n    for (let i = 0; i < sortPriority.length; i++) {\n      const key = sortPriority[i]\n      const x = a[key];\n      const y = b[key];\n      const order = state.sortOrders[key];\n      if (x < y) {\n        return -1 * order;\n      } else if (x > y) {\n        return 1 * order;\n      }\n    }\n    return 0;\n  });\n};\n\nexport default (state = initialState, action) => {\n  let newState;\n  switch (action.type) {\n    case SET_FILTER_KEY:\n      newState = {\n        ...state,\n        filterKey: action.payload.filterKey\n      };\n      newState.filteredEntries = filterEntries(newState);\n      return newState;\n    case SET_SORT_KEY:\n      const sortKey = action.payload.sortKey;\n      const order = sortKey === state.sortKey ? -1 : 1;\n      const sortOrders = {...state.sortOrders};\n      sortOrders[sortKey] *= order;\n      newState = {\n        ...state,\n        sortKey,\n        sortOrders\n      };\n      newState.filteredEntries = filterEntries(newState);\n      return newState;\n    case SET_HIDE_NO_DOC:\n      newState = {\n        ...state,\n        hideNoDoc: action.payload.hideNoDoc\n      }\n      newState.filteredEntries = filterEntries(newState);\n      return newState;\n    default:\n      return state\n  }\n};\n","import React from 'react';\nimport { createStore } from 'redux';\nimport { Provider } from 'react-redux';\nimport { HashRouter as Router, Switch, Route } from 'react-router-dom';\nimport Main from './components/Main';\nimport rootReducer from './reducers';\n\nconst store = createStore(rootReducer);\n\nexport default function App() {\n  return (\n    <Provider store={store}>\n      <Router>\n        <Switch>\n          <Route path=\"/search\" component={Main} />\n          <Route path=\"/\" exact component={Main} />\n        </Switch>\n      </Router>\n    </Provider>\n  );\n};\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport 'bootstrap';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}