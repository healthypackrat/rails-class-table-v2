{"version":3,"sources":["components/SearchField.js","actions.js","actionTypes.js","components/UseRegExp.js","components/InvertResult.js","components/HideNoDoc.js","components/ResultCount.js","components/TableHeaderCell.js","components/SortableTableHeaderCell.js","components/TableHeaderRow.js","components/LinkCell.js","components/NumberCell.js","components/TableRow.js","components/Table.js","components/Main.js","reducers/index.js","App.js","index.js"],"names":["_","require","qs","SearchField","props","setFilterKey","debounce","state","input","pushHistory","updateTitle","updateInput","event","setState","target","value","location","stringify","q","history","push","document","title","params","parse","search","this","className","type","placeholder","onChange","React","Component","withRouter","connect","filterKey","payload","useRegExp","setUseRegExp","id","checked","e","htmlFor","invertResult","setInvertResult","hideNoDoc","setHideNoDoc","filteredEntries","length","TableHeaderCell","label","isNumber","width","classnames","style","stateSortKey","sortKey","sortOrders","setSortKey","onClick","TableHeaderRow","LinkCell","entry","href","path","total","rel","class_name","NumberCell","number","TableRow","index","class_desc","method_count","method_desc","map","key","Main","sortPriorities","initialState","filterEntries","sortPriority","entries","filter","pattern","condition","RegExp","test","toLowerCase","indexOf","sort","a","b","i","x","y","order","store","createStore","newState","action","ReactDOM","render","component","exact","getElementById"],"mappings":"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","file":"static/js/main.171a2957.chunk.js","sourcesContent":["import React from 'react';\nimport { connect } from 'react-redux';\nimport { withRouter } from 'react-router';\nimport { setFilterKey } from '../actions';\nconst _ = require('lodash');\nconst qs = require('query-string');\n\nclass SearchField extends React.Component {\n  constructor(props) {\n    super(props);\n\n    const params = qs.parse(props.location.search);\n\n    this.state = { input: params.q || '' };\n  }\n\n  setFilterKey = _.debounce(() => {\n    this.props.setFilterKey(this.state.input);\n    this.pushHistory();\n    this.updateTitle();\n  }, 500);\n\n  updateInput = event => {\n    this.setState({ input: event.target.value });\n    this.setFilterKey();\n  };\n\n  pushHistory = () => {\n    const location = this.state.input ? `/search?${qs.stringify({ q: this.state.input })}` : '/';\n    this.props.history.push(location);\n  };\n\n  updateTitle = () => {\n    document.title = this.state.input || 'rails-class-table-v2';\n  };\n\n  componentDidMount() {\n    this.props.setFilterKey(this.state.input);\n    this.updateTitle();\n  }\n\n  render() {\n    return (\n      <div className=\"form-group\">\n        <input type=\"search\" className=\"form-control\" placeholder=\"クラス名で検索...\" value={this.state.input} onChange={this.updateInput} />\n      </div>\n    );\n  }\n}\n\nexport default withRouter(connect(\n  null,\n  { setFilterKey }\n)(SearchField));\n","import { SET_FILTER_KEY, SET_SORT_KEY, SET_HIDE_NO_DOC, SET_USE_REGEXP, SET_INVERT_RESULT } from './actionTypes';\n\nexport const setFilterKey = filterKey => ({\n  type: SET_FILTER_KEY,\n  payload: {\n    filterKey\n  }\n});\n\nexport const setSortKey = sortKey => ({\n  type: SET_SORT_KEY,\n  payload: {\n    sortKey\n  }\n});\n\nexport const setHideNoDoc = hideNoDoc => ({\n  type: SET_HIDE_NO_DOC,\n  payload: {\n    hideNoDoc\n  }\n});\n\nexport const setUseRegExp = useRegExp => ({\n  type: SET_USE_REGEXP,\n  payload: {\n    useRegExp\n  }\n});\n\nexport const setInvertResult = invertResult => ({\n  type: SET_INVERT_RESULT,\n  payload: {\n    invertResult\n  }\n});\n","export const SET_FILTER_KEY = 'SET_FILTER_KEY';\nexport const SET_SORT_KEY = 'SET_SORT_KEY';\nexport const SET_HIDE_NO_DOC = 'SET_HIDE_NO_DOC';\nexport const SET_USE_REGEXP = 'SET_USE_REGEXP';\nexport const SET_INVERT_RESULT = 'SET_INVERT_RESULT';\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { setUseRegExp } from '../actions';\n\nconst UseRegExp = ({ useRegExp, setUseRegExp }) => {\n  return (\n    <div className=\"form-check form-group\">\n      <input type=\"checkbox\" id=\"useRegExp\" className=\"form-check-input\" checked={useRegExp} onChange={e => setUseRegExp(e.target.checked)} />\n      <label className=\"form-check-label\" htmlFor=\"useRegExp\">正規表現で検索</label>\n    </div>\n  );\n};\n\nconst mapStateToProps = state => {\n  return { useRegExp: state.useRegExp };\n};\n\nexport default connect(\n  mapStateToProps,\n  { setUseRegExp }\n)(UseRegExp);\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { setInvertResult } from '../actions';\n\nconst InvertResult = ({ invertResult, setInvertResult }) => {\n  return (\n    <div className=\"form-check form-group\">\n      <input type=\"checkbox\" id=\"invertResult\" className=\"form-check-input\" checked={invertResult} onChange={e => setInvertResult(e.target.checked)} />\n      <label className=\"form-check-label\" htmlFor=\"invertResult\">検索結果を反転</label>\n    </div>\n  );\n};\n\nconst mapStateToProps = state => {\n  return { invertResult: state.invertResult };\n};\n\nexport default connect(\n  mapStateToProps,\n  { setInvertResult }\n)(InvertResult);\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { setHideNoDoc } from '../actions';\n\nconst HideNoDoc = ({ hideNoDoc, setHideNoDoc }) => {\n  return (\n    <div className=\"form-check form-group\">\n      <input type=\"checkbox\" id=\"hideNoDoc\" className=\"form-check-input\" checked={hideNoDoc} onChange={e => setHideNoDoc(e.target.checked)} />\n      <label className=\"form-check-label\" htmlFor=\"hideNoDoc\">ドキュメントが書かれていないクラスを隠す</label>\n    </div>\n  );\n};\n\nconst mapStateToProps = state => {\n  return { hideNoDoc: state.hideNoDoc };\n};\n\nexport default connect(\n  mapStateToProps,\n  { setHideNoDoc }\n)(HideNoDoc);\n","import React from 'react';\nimport { connect } from 'react-redux';\n\nconst ResultCount = ({ filteredEntries }) => {\n  return (\n    <p>{filteredEntries.length}件の結果</p>\n  );\n};\n\nconst mapStateToProps = state => {\n  return { filteredEntries: state.filteredEntries };\n};\n\nexport default connect(mapStateToProps)(ResultCount);\n","import React from 'react';\nimport classnames from 'classnames';\n\nconst TableHeaderCell = ({ label, isNumber, width }) => {\n  const className = classnames({ 'text-right': isNumber });\n  const style = { width: width };\n  return <th className={className} style={style}>{label}</th>;\n};\n\nexport default TableHeaderCell;\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport classnames from 'classnames';\nimport { setSortKey } from '../actions';\n\nconst SortableTableHeaderCell = ({ label, sortKey, isNumber, width, stateSortKey, sortOrders, setSortKey }) => {\n  const className = classnames({\n    'table-info': sortKey === stateSortKey,\n    'text-right': isNumber,\n    'pointer': true\n  }, sortOrders[sortKey] > 0 ? 'dropup' : 'dropdown');\n  const style = { 'width': width };\n  return (\n    <th className={className}\n      style={style}\n      onClick={() => setSortKey(sortKey)}\n    >\n      {label}\n      {\" \"}\n      {<span className=\"dropdown-toggle\"></span>}\n    </th>\n  );\n};\n\nconst mapStateToProps = state => {\n  return {\n    stateSortKey: state.sortKey,\n    sortOrders: state.sortOrders\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  { setSortKey }\n)(SortableTableHeaderCell);\n","import React from 'react';\nimport TableHeaderCell from './TableHeaderCell';\nimport SortableTableHeaderCell from './SortableTableHeaderCell';\n\nexport default function TableHeaderRow() {\n  return (\n    <tr>\n      <TableHeaderCell label=\"#\" isNumber={true} width=\"5em\" />\n      <SortableTableHeaderCell label=\"クラス名\" sortKey=\"class_name\" isNumber={false} />\n      <SortableTableHeaderCell label=\"クラス概要\" sortKey=\"class_desc\" isNumber={true} width=\"8em\" />\n      <SortableTableHeaderCell label=\"メソッド数\" sortKey=\"method_count\" isNumber={true} width=\"8em\" />\n      <SortableTableHeaderCell label=\"メソッド概要\" sortKey=\"method_desc\" isNumber={true} width=\"9em\" />\n      <SortableTableHeaderCell label=\"合計\" sortKey=\"total\" isNumber={true} width=\"5em\" />\n    </tr>\n  );\n};\n","import React from 'react';\nimport classnames from 'classnames';\n\nexport default function LinkCell({ entry }) {\n  return (\n    <td>\n      <a href={`https://api.rubyonrails.org/${entry.path}`}\n        className={classnames({'text-secondary': entry.total === 0})}\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n      >{entry.class_name}</a>\n    </td>\n  );\n};\n","import React from 'react';\n\nexport default function NumberCell({ number }) {\n  return <td className=\"text-right\">{number}</td>;\n};\n","import React from 'react';\nimport LinkCell from './LinkCell';\nimport NumberCell from './NumberCell';\n\nexport default function TableRow({ entry }) {\n  return (\n    <tr>\n      <NumberCell number={entry.index} />\n      <LinkCell entry={entry} />\n      <NumberCell number={entry.class_desc} />\n      <NumberCell number={entry.method_count} />\n      <NumberCell number={entry.method_desc} />\n      <NumberCell number={entry.total} />\n    </tr>\n  );\n};\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport TableHeaderRow from './TableHeaderRow';\nimport TableRow from './TableRow';\n\nconst Table = ({ filteredEntries }) => {\n  return (\n    <table className=\"table table-hover\">\n      <thead>\n        <TableHeaderRow />\n      </thead>\n      <tbody>\n        {filteredEntries.map(entry => <TableRow entry={entry} key={entry.class_name} />)}\n      </tbody>\n    </table>\n  );\n};\n\nconst mapStateToProps = state => {\n  return { filteredEntries: state.filteredEntries };\n};\n\nexport default connect(\n  mapStateToProps\n)(Table);\n","import React from 'react';\nimport SearchField from './SearchField';\nimport UseRegExp from './UseRegExp';\nimport InvertResult from './InvertResult';\nimport HideNoDoc from './HideNoDoc';\nimport ResultCount from './ResultCount';\nimport Table from './Table';\n\nexport default function Main() {\n  return (\n    <div className=\"main container-fluid my-3\">\n      <p>\n        <a href=\"https://github.com/healthypackrat/rails-class-table-v2\">リポジトリに戻る</a>\n      </p>\n      <SearchField />\n      <UseRegExp />\n      <InvertResult />\n      <HideNoDoc />\n      <ResultCount />\n      <Table />\n    </div>\n  );\n};\n","import { SET_FILTER_KEY, SET_SORT_KEY, SET_HIDE_NO_DOC, SET_USE_REGEXP, SET_INVERT_RESULT } from '../actionTypes';\nimport entries from '../data/entries.json';\n\nconst sortPriorities = {\n  class_name: ['class_name'],\n  class_desc: ['class_desc', 'method_desc', 'method_count', 'class_name'],\n  method_count: ['method_count', 'method_desc', 'class_desc', 'class_name'],\n  method_desc: ['method_desc', 'class_desc', 'method_count', 'class_name'],\n  total: ['total', 'method_desc', 'class_desc', 'method_count', 'class_name']\n};\n\nconst initialState = {\n  filterKey: '',\n  filteredEntries: [],\n  sortKey: 'class_desc',\n  sortOrders: {\n    class_name: 1,\n    class_desc: -1,\n    method_count: -1,\n    method_desc: -1,\n    total: -1\n  },\n  hideNoDoc: true,\n  useRegExp: false,\n  invertResult: false\n};\n\nconst filterEntries = state => {\n  const sortPriority = sortPriorities[state.sortKey];\n  return entries.filter(entry => {\n    let useRegExp = state.useRegExp;\n    let pattern;\n    let condition;\n    if (useRegExp) {\n      try {\n        pattern = new RegExp(state.filterKey, 'i');\n      } catch (e) {\n        useRegExp = false\n      }\n    }\n    if (useRegExp) {\n      condition = pattern.test(entry.class_name);\n    } else {\n      condition = entry.class_name.toLowerCase().indexOf(state.filterKey.toLowerCase()) !== -1;\n    }\n    return state.invertResult ? !condition : condition;\n  }).filter(entry => {\n    if (state.hideNoDoc) {\n      return entry.total !== 0;\n    } else {\n      return true;\n    }\n  }).sort((a, b) => {\n    for (let i = 0; i < sortPriority.length; i++) {\n      const key = sortPriority[i]\n      const x = a[key];\n      const y = b[key];\n      const order = state.sortOrders[key];\n      if (x < y) {\n        return -1 * order;\n      } else if (x > y) {\n        return 1 * order;\n      }\n    }\n    return 0;\n  }).map((entry, index) => {\n    entry.index = index + 1;\n    return entry;\n  });\n};\n\nexport default (state = initialState, action) => {\n  let newState;\n  switch (action.type) {\n    case SET_FILTER_KEY:\n      newState = {\n        ...state,\n        filterKey: action.payload.filterKey\n      };\n      newState.filteredEntries = filterEntries(newState);\n      return newState;\n    case SET_SORT_KEY:\n      const sortKey = action.payload.sortKey;\n      const order = sortKey === state.sortKey ? -1 : 1;\n      const sortOrders = {...state.sortOrders};\n      sortOrders[sortKey] *= order;\n      newState = {\n        ...state,\n        sortKey,\n        sortOrders\n      };\n      newState.filteredEntries = filterEntries(newState);\n      return newState;\n    case SET_HIDE_NO_DOC:\n      newState = {\n        ...state,\n        hideNoDoc: action.payload.hideNoDoc\n      }\n      newState.filteredEntries = filterEntries(newState);\n      return newState;\n    case SET_USE_REGEXP:\n      newState = {\n        ...state,\n        useRegExp: action.payload.useRegExp\n      }\n      newState.filteredEntries = filterEntries(newState);\n      return newState;\n    case SET_INVERT_RESULT:\n      newState = {\n        ...state,\n        invertResult: action.payload.invertResult\n      }\n      newState.filteredEntries = filterEntries(newState);\n      return newState;\n    default:\n      return state\n  }\n};\n","import React from 'react';\nimport { createStore } from 'redux';\nimport { Provider } from 'react-redux';\nimport { HashRouter as Router, Switch, Route } from 'react-router-dom';\nimport Main from './components/Main';\nimport rootReducer from './reducers';\n\nconst store = createStore(rootReducer);\n\nexport default function App() {\n  return (\n    <Provider store={store}>\n      <Router>\n        <Switch>\n          <Route path=\"/search\" component={Main} />\n          <Route path=\"/\" exact component={Main} />\n        </Switch>\n      </Router>\n    </Provider>\n  );\n};\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport 'bootstrap';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}